<!DOCTYPE html>
<html lang="en" style="background:#f5f5f5">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pomodoro Timer</title>
  <style>
    :root { --bg:#fff; --text:#1f2933; }
    *{box-sizing:border-box;font-family:system-ui,-apple-system,"Segoe UI",sans-serif;}
    body{margin:0;background:transparent;display:flex;justify-content:center;align-items:center;min-height:100vh;}
    .widget{width:340px;background:var(--bg);border:1px solid #000;border-radius:16px;box-shadow:0 14px 35px rgba(15,23,42,.05);padding:18px 18px 10px;display:flex;flex-direction:column;gap:12px;}
    .title{font-size:18px;font-weight:400;color:var(--text);}
    .input{width:100%;background:#e5e7eb;border:none;outline:none;border-radius:10px;padding:9px 11px;font-size:14px;}
    .task{display:flex;align-items:center;justify-content:space-between;gap:8px;padding:8px 0;border-bottom:1px solid rgba(0,0,0,.1);} .task:last-child{border-bottom:none;}
    .task-left{display:flex;align-items:center;gap:8px;flex:1;min-width:0;}
    .play-btn{width:22px;height:22px;border-radius:50%;border:1.5px solid #000;display:grid;place-items:center;background:#fff;cursor:pointer;}
    .play-btn.active{background:rgba(13,148,136,.12);border-color:#0d9488;}
    .task-title{font-size:14px;color:var(--text);}
    .task-actions{display:flex;gap:6px;align-items:center;}
    .icon-btn{background:none;border:none;cursor:pointer;font-size:12px;color:#000;}
    .time{font-weight:600;font-variant-numeric:tabular-nums;width:52px;text-align:right;}
    .settings{display:flex;gap:12px;flex-wrap:wrap;font-size:12px;border-top:1px solid rgba(0,0,0,.08);padding-top:8px;}
    .settings input{width:50px;border:1px solid #ccc;border-radius:6px;padding:2px 4px;font-size:12px;text-align:center;}
    .music-box{border-top:1px solid rgba(0,0,0,.08);padding-top:8px;}
    .music-title{font-size:12px;color:#555;margin-bottom:4px;}
    .music-link{display:inline-flex;align-items:center;gap:6px;background:#f2f2f2;padding:8px 12px;border-radius:8px;text-decoration:none;color:#000;font-size:13px;transition:background 0.2s ease;}
    .music-link:hover{background:#e5e5e5;}
  </style>
</head>
<body>
  <div class="widget">
    <div class="title">Pomodoro Timer</div>
    <input id="newTask" class="input" placeholder="Hit Enter to add a task" />
    <div id="tasks"></div>
    <div class="settings">
      <label>Focus <input id="focusTime" type="number" value="25" min="1" />m</label>
      <label>Break <input id="breakTime" type="number" value="5" min="1" />m</label>
    </div>
    <div class="music-box">
      <div class="music-title">ðŸŽ§ Focus playlist (Apple Music)</div>
      <a href="https://music.apple.com/il/playlist/work/pl.u-38oWXdeIYzvB2K?l=iw" target="_blank" class="music-link">â–¶ Open in Apple Music</a>
    </div>
  </div>
  <script>
    const tasksEl=document.getElementById('tasks');
    const newTaskEl=document.getElementById('newTask');
    const focusInput=document.getElementById('focusTime');
    const breakInput=document.getElementById('breakTime');
    let tasks=[]; let activeTaskId=null; let isRunning=false; let timerInterval=null;
    function getFocusMinutes(){return Math.max(1,parseInt(focusInput.value)||25);} 
    function addTask(title){const t={id:crypto.randomUUID(),title,done:false,time:getFocusMinutes()*60};tasks.push(t);render();}
    function formatTime(s){const m=Math.floor(s/60).toString().padStart(2,'0');const sec=(s%60).toString().padStart(2,'0');return `${m}:${sec}`;}
    function togglePlayPause(id){if(activeTaskId===id){isRunning=!isRunning;if(isRunning)startTimer();else clearInterval(timerInterval);}else{activeTaskId=id;isRunning=true;startTimer();}render();}
    function startTimer(){clearInterval(timerInterval);timerInterval=setInterval(()=>{const task=tasks.find(t=>t.id===activeTaskId);if(!task)return;if(task.time>0){task.time--;}else{clearInterval(timerInterval);isRunning=false;task.done=true;}render();},1000);} 
    function resetTask(id){const t=tasks.find(t=>t.id===id);if(t)t.time=getFocusMinutes()*60;render();}
    function deleteTask(id){tasks=tasks.filter(t=>t.id!==id);if(activeTaskId===id)clearInterval(timerInterval);render();}
    function render(){tasksEl.innerHTML='';tasks.forEach(task=>{const row=document.createElement('div');row.className='task';const left=document.createElement('div');left.className='task-left';const play=document.createElement('div');play.className='play-btn';play.innerHTML=activeTaskId===task.id&&isRunning?'âšâš':'â–¶';play.onclick=()=>togglePlayPause(task.id);const title=document.createElement('div');title.className='task-title';title.textContent=task.title;left.appendChild(play);left.appendChild(title);const actions=document.createElement('div');actions.className='task-actions';const reset=document.createElement('button');reset.className='icon-btn';reset.textContent='â†»';reset.onclick=()=>resetTask(task.id);const del=document.createElement('button');del.className='icon-btn';del.textContent='ðŸ—‘';del.onclick=()=>deleteTask(task.id);const time=document.createElement('div');time.className='time';time.textContent=formatTime(task.time);actions.appendChild(reset);actions.appendChild(del);actions.appendChild(time);row.appendChild(left);row.appendChild(actions);tasksEl.appendChild(row);});}
    newTaskEl.addEventListener('keydown',e=>{if(e.key==='Enter' && newTaskEl.value.trim()!==''){addTask(newTaskEl.value.trim());newTaskEl.value='';}});
    render();
  </script>
</body>
</html>
